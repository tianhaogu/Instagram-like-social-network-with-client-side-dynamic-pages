{% extends "base.html" %}
{% block content %}

{% for post in posts %}
    <!--The First Instagram-->
    <div class="userDiv">
      <div class="userHeader">
        <a href="{{ "/users/" ~ post.owner ~ "/" }}">
          <div>
            <div style="display: inline-block;vertical-align: middle;">
              <img src="{{post.owner_img_url}}" width="30" height="30" alt="userPhoto">
            </div>
            <b style="display: inline-block;vertical-align: middle;">{{post.owner}}</b>
          </div>
        </a>
        <a href="{{"/posts/" ~ post.postid ~ "/"}}">
          <p style="display:inline-block;font-size: small; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif">
              {{post.timestamp}}
          </p>
        </a>
      </div>
      <div class="userPhoto">
        <img src="{{post.img_url}}" alt="UserPostPhoto">
      </div>
      <div class="userParagraph">
        {% if post.likes <= 1 %}
          <p>{{post.likes}} like</p>
        {% else %}
          <p>{{post.likes}} likes</p>
        {% endif %}
        {% for comment in post.comments %}
        <p>
          <a href="{{"/users/" ~ comment.owner ~ "/"}}">
            <b>{{comment.owner}}</b>
          </a>  
          {{comment.text}}
        </p>  
        {% endfor %}
          {% if post.is_logname_like %}
            <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
            <form action="/likes/?target=/" method="post" enctype="multipart/form-data">
              <input type="hidden" name="operation" value="unlike"/>
              <input type="hidden" name="postid" value="{{post.postid}}"/>
              <input type="submit" name="unlike" value="unlike"/>
            </form>

          {% else %}
            <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
            <form action="/likes/?target=/" method="post" enctype="multipart/form-data">
              <input type="hidden" name="operation" value="like"/>
              <input type="hidden" name="postid" value="{{post.postid}}"/>
              <input type="submit" name="like" value="like"/>
            </form>
          {% endif %}
        <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
        <form action="/comments/?target=/" method="post" enctype="multipart/form-data">
          <input type="hidden" name="operation" value="create"/>
          <input type="hidden" name="postid" value="{{post.postid}}"/>
          <input type="text" name="text" required/>
          <input type="submit" name="comment" value="comment"/>
        </form>

      </div>
    </div>
    <br>
  
{% endfor %}

<div id="reactEntry">
  Loading ...
</div>
<!-- Load JavaScript -->
<script type="text/javascript" src="{{ url_for('static', filename='js/bundle.js') }}"></script>

{% endblock %}
